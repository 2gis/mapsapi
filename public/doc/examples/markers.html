<h2 id="работа-с-маркерами">Работа с маркерами</h2><p><dl class="api-incut"><ul class="page-contents"><li><a href="#описание">Описание</a></li><li><a href="#маркер-с-балуном">Маркер с балуном</a></li><li><a href="#драгабельный-маркер">Драгабельный маркер</a></li><li><a href="#кастомный-маркер">Кастомный маркер</a></li><li><a href="#программное-открытие-маркера">Программное открытие маркера</a></li></ul></dl></p>
<h3 id="описание">Описание</h3><p>В разделе описаны четыре примера по использованию маркеров.</p>
<p>Для получения полной информации следует обратиться к разделу  <a href="/doc/2.0/maps/manual/markers">Маркеры</a>.</p>
<h3 id="маркер-с-балуном">Маркер с балуном</h3><p>Рассмотрим пример созднаия обычного маркера с балуном и нанесения их на карту.</p>
<script src="http://maps.api.2gis.ru/2.0/loader.js?pkg=full" data-id="dgLoader"></script>
<div id="map" style="width: 600px; height: 500px; border: 1px solid #ccc;"></div>
<script type="text/javascript">
    var map;

    DG.then(function () {
        map = new DG.Map('map', {
            center: new DG.LatLng(54.981, 82.891),
            zoom: 15,
            dgGeoclicker: true
        });

        DG.marker([54.981, 82.891], {
            title: 'На меня можно жать',
        }).addTo(map).bindPopup('Я открылся!');
    });
</script>

<p>Для начала необходимо подключить карту,</p>
<pre><code>&lt;script src=&quot;http://maps.api.2gis.ru/2.0/loader.js?pkg=full&quot; data-id=&quot;dgLoader&quot;&gt;&lt;/script&gt;
</code></pre><p>инициализировать </p>
<pre><code>DG.then(function () {
    map = new DG.Map(&#39;map&#39;, {
        center: new DG.LatLng(54.981, 82.891),
        zoom: 15,
        dgGeoclicker: true
    });
});
</code></pre><p>и отобразать.</p>
<pre><code>&lt;div id=&quot;map&quot; style=&quot;width: 600px; height: 500px;&quot;&gt;&lt;/div&gt;
</code></pre><p>Дальше создаем маркер и добавить его на карту.</p>
<pre><code>DG.marker([54.981, 82.891], {
    title: &#39;На меня можно жать&#39;,
}).addTo(map).bindPopup(&#39;Я открылся!&#39;);
</code></pre><p> Финальный код страницы будет иметь такой вид:</p>
<pre><code> &lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&#39;utf-8&#39;&gt;
        &lt;title&gt;DG.marker Demo&lt;/title&gt;
        &lt;script src=&quot;http://maps.api.2gis.ru/2.0/loader.js?pkg=full&quot; data-id=&quot;dgLoader&quot;&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id=&quot;map&quot; style=&quot;width: 600px; height: 500px;&quot;&gt;&lt;/div&gt;
        &lt;script type=&quot;text/javascript&quot;&gt;
            var map;

            DG.then(function () {
                map = new DG.Map(&#39;map&#39;, {
                    center: new DG.LatLng(54.98, 82.89),
                    zoom: 15,
                    dgGeoclicker: true
                });

                DG.marker([54.981, 82.891], {
                    title: &#39;На меня можно жать&#39;,
                }).addTo(map).bindPopup(&#39;Я открылся!&#39;);
            });
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><p>&#39;title&#39; даёт возможность сделать подсказку при наведении.
C помощью &#39;addTo(map)&#39;, добавляем маркер на карту. 
&#39;bindPopup(&#39;Я открылся!&#39;)&#39; создает балун с текстом, который появится при нажатии на маркер.</p>
<h3 id="драгабельный-маркер">Драгабельный маркер</h3><p>Для некоторых задач необходимо иметь возможность переносить маркер. Пример такой возможности показан ниже.</p>
<p><div id="map1" style="width: 600px; height: 500px; border: 1px solid #ccc;"></div></p>
<script type="text/javascript">
        var map1;

        DG.then(function () {
            map1 = new DG.Map('map1', {
                center: new DG.LatLng(54.981, 82.891),
                zoom: 15,
                dgGeoclicker: true
            });

            DG.marker([54.981, 82.891], {
                draggable: true,
                title: 'Меня можно переносить',
            }).addTo(map1);
        });
</script>

<p>Текст благодаря которому подобныую возможность можно осуществить</p>
<pre><code>DG.marker([54.981, 82.891], {
    draggable: true,
    title: &#39;Меня можно переносить&#39;,
}).addTo(map);
</code></pre><p>Такого эффекта пы добились с помощью &#39;draggable: true&#39; в опциях маркера.</p>
<p>Полный текст примера:</p>
<pre><code> &lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&#39;utf-8&#39;&gt;
        &lt;title&gt;DG.marker Demo&lt;/title&gt;
        &lt;script src=&quot;http://maps.api.2gis.ru/2.0/loader.js?pkg=full&quot; data-id=&quot;dgLoader&quot;&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id=&quot;map&quot; style=&quot;width: 600px; height: 500px;&quot;&gt;&lt;/div&gt;
        &lt;script type=&quot;text/javascript&quot;&gt;
            var map;

            DG.then(function () {
                map = new DG.Map(&#39;map&#39;, {
                    center: new DG.LatLng(54.981, 82.891),
                    zoom: 15,
                    dgGeoclicker: true
                });

                DG.marker([54.981, 82.891], {
                    draggable: true,
                    title: &#39;Меня можно переносить&#39;,
                }).addTo(map);
             });
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><h3 id="кастомный-маркер">Кастомный маркер</h3><p>Есть возможность так же отображать маркера не со стандартной, а с кастомной картинкой, пример ниже.</p>
<p><div id="map2" style="width: 600px; height: 500px; border: 1px solid #ccc;"></div></p>
<script type="text/javascript">
    var map2;

     DG.then(function () {
        map2 = new DG.Map('map2', {
            center: new DG.LatLng(54.981, 82.891),
            zoom: 15,
            dgGeoclicker: true
        });

        var myIcon = DG.icon({
            iconUrl: 'http://maps.api.2gis.ru/2.0/example_logo.png',
            iconSize: [48, 48]
        });
        DG.marker([54.981, 82.891], {
            icon: myIcon
        }).addTo(map2).bindPopup('Я кастомный маркер!');
    });
</script>

<p>Для отображения кастомной картинки необходимо в опциях маркера указать параметр &#39;icon&#39;.
Класс <a href='/doc/2.0/maps/manual/markers#класс-dgicon'>DG.icon</a> поможет нам в создании значения переменной &#39;icon&#39;. В примере по создаем экземпляр, который содержит в своих опциях путь к картинке и размер маркера.</p>
<pre><code>var myIcon = DG.icon({
    iconUrl: &#39;http://maps.api.2gis.ru/2.0/example_logo.png&#39;,
    iconSize: [48, 48]
});
</code></pre><p>Финальный текст примера:</p>
<pre><code> &lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&#39;utf-8&#39;&gt;
        &lt;title&gt;DG.marker Demo&lt;/title&gt;
        &lt;script src=&quot;http://maps.api.2gis.ru/2.0/loader.js?pkg=full&quot; data-id=&quot;dgLoader&quot;&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id=&quot;map&quot; style=&quot;width: 600px; height: 500px;&quot;&gt;&lt;/div&gt;
        &lt;script type=&quot;text/javascript&quot;&gt;
            var map;

             DG.then(function () {
                map = new DG.Map(&#39;map&#39;, {
                    center: new DG.LatLng(54.981, 82.891),
                    zoom: 15,
                    dgGeoclicker: true
                });

                var myIcon = DG.icon({
                    iconUrl: &#39;http://maps.api.2gis.ru/2.0/example_logo.png&#39;,
                    iconSize: [48, 48]
                });
                DG.marker([54.981, 82.891], {
                    icon: myIcon
                }).addTo(map).bindPopup(&#39;Я кастомный маркер!&#39;);
            });
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><h3 id="программное-открытие-маркера">Программное открытие маркера</h3><p>Есть возможность открыть балун &quot;по требованию&quot;. К примеру, по клику в ссылку, кнопку. Пример подобного случая представлен ниже.</p>
<button id='open-popup'>open popup</button>

<p><div id="map3" style="width: 600px; height: 500px; border: 1px solid #ccc;"></div></p>
<script type="text/javascript">
    var map3;

     DG.then(function () {
        map3 = new DG.Map('map3', {
            center: new DG.LatLng(54.981, 82.891),
            zoom: 15,
            dgGeoclicker: true
        });

        var marker = DG.marker([54.981, 82.891]).addTo(map3).bindPopup('Я открылся!');

        document.getElementById('open-popup').onclick = clickButton;

        function clickButton() {
            marker.openPopup();
        }
    });
</script>

<p>Вешаем событие на кнопку</p>
<pre><code>document.getElementById(&#39;open-popup&#39;).onclick = clickButton;
</code></pre><p>Пишем обработчик события</p>
<pre><code>function clickButton() {
    marker.openPopup();
}
</code></pre><p>Теперь при клике в элемент с id = open-popup у нас будет открываться балун маркера. Полнуый код примера ниже.</p>
<pre><code> &lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&#39;utf-8&#39;&gt;
        &lt;title&gt;DG.marker Demo&lt;/title&gt;
        &lt;script src=&quot;http://maps.api.2gis.ru/2.0/loader.js?pkg=full&quot; data-id=&quot;dgLoader&quot;&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id=&quot;map&quot; style=&quot;width: 600px; height: 500px;&quot;&gt;&lt;/div&gt;
        &lt;script type=&quot;text/javascript&quot;&gt;
            var map;

            DG.then(function () {
                map = new DG.Map(&#39;map&#39;, {
                    center: new DG.LatLng(54.981, 82.891),
                    zoom: 15,
                    dgGeoclicker: true
                });

                var marker = DG.marker([54.981, 82.891]).addTo(map).bindPopup(&#39;Я открылся!&#39;);

                document.getElementById(&#39;open-popup&#39;).onclick = clickButton;

                function clickButton() {
                    marker.openPopup();
                }
            });
        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>