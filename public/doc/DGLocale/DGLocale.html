<h1>Плагин локализации карты 2GIS</h1>
<p>В картографическом API 2GIS имеется возможность отображения элементов пользовательских интерфейсов на нескольких языках. Перевод самих тайлов при этом не предусмотрен, так как подписи на тайлах всегда соответствуют языку отображаемой страны.</p>
<p>Данный плагин является утилитарным и предоставляет функционал для осуществления перевода других плагинов.</p>
<p>После подключения данного плагина у объекта L.Map появляется 2 новых метода: setLang и getLang. Также появляется объект DG.Locale, который можно примешать (to mixin) в какой-либо сторонний плагин, после чего в нем появится метод t, с помощью которого можно осуществить перевод. Объекты плагинов, к которым примешивается объект DG.Locale должны содержать внутри себя свойство _map и статическое свойство Dictionary. Базовым для всех словарей является объект DG.Dictionary, в котором хранятся правила перевода слов во множественное число (plural rules). На данный момент поддерживаются правила для русского и итальянского языков. При создании плагина, использующего свои словари, необходимо их разместить в папке lang. К примеру, если вы будете использовать итальянский и русский языки, тогда необходимо создать файлы lang/it.js и lang/ru.js. Как именно создавать словари будет указано дальше в примерах.</p>
<p>Также есть возможность указать язык карты по умолчанию, передав его при подключении API с помощью параметра lang:</p>
<pre><code>&lt;script src=&quot;http://maps.api.2gis.ru/2.0/loader.js?pkg=full&amp;mode=debug&amp;lang=it&quot;&gt;&lt;/script&gt;</code></pre>
<h1>API</h1>
<h2>Объект DG.Locale</h2>
<h3>Методы</h3>
<table>
    <tr>
        <th>Метод</th>
        <th>Параметры</th>
        <th>Возвращаемый тип</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td>t</td>
        <td>
            <table>
                <tr>
                    <th>Тип</th>
                    <th>Описание</th>
                </tr>
                <tr>
                    <td>String</td>
                    <td>Строка, требующая перевода.</td>
                </tr>
                <tr>
                    <td>Number</td>
                    <td>Число, после которого необходимо осуществить склонение.</td>
                </tr>
            </table>
        </td>
        <td>String</td>
        <td>Осуществляет перевод строки.</td>
    </tr>
</table>

<h2>Класс L.Map</h2>
<h3>Методы</h3>
<table>
    <tr>
        <th>Метод</th>
        <th>Параметры</th>
        <th>Возвращаемый тип</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td>setLang</td>
        <td>
            <table>
                <tr>
                    <th>Тип</th>
                    <th>Описание</th>
                </tr>
                <tr>
                    <td>String</td>
                    <td>Код языка, например: it, ru.</td>
                </tr>
            </table>
        </td>
        <td>Нет</td>
        <td>Устанавливает текущий язык карты.</td>
    </tr>
    <tr>
        <td>getLang</td>
        <td>Нет</td>
        <td>String</td>
        <td>Возвращает текущий язык карты.</td>
    </tr>
</table>


<h2>События</h2>
<table>
    <tr>
        <th>Событие</th>
        <th>Объект события</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td>dgLangChange</td>
        <td>LangEvent</td>
        <td>Возникает при изменении текущего языка карты.</td>
    </tr>
</table>

<h2>Объекты событий</h2>
<h3>LangEvent</h3>
<h4>Свойства</h4>
<table>
    <tr>
        <th>Свойство</th>
        <th>Тип</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td>lang</td>
        <td>String</td>
        <td>Текущий язык карты.</td>
    </tr>
</table>


<h1>Примеры</h1>
<p>Подмешивание (mixin) функционала локализации в пользовательский плагин:</p>
<pre><code>DG.LocaleExample = L.Control.extend({
    includes: DG.Locale,
    statics: {
            Dictionary: {}
        }
    ...
}</code></pre>
<p>Подписка на событие dgLangChange:</p>
<pre><code>map.on(&#39;dgLangChange&#39;, this._updateText, this);</code></pre>
<p>Перевод строки на текущий язык карты:</p>
<pre><code>container.innerHTML = this.t(&quot;{n} people&quot;, 16700000) + &#39; &#39; + this.t(&quot;regularly use 2GIS&quot;);</code></pre>
<p>Получение текущего языка карты:</p>
<pre><code>map.getLang();</code></pre>
<p>Установка текущего языка карты:</p>
<pre><code>map.setLang(&#39;ru&#39;);</code></pre>
<p>Создание своих словарей на итальянском и русском языках:</p>
<pre><code>содержимое файла lang/it.js

DG.LocaleExample.Dictionary.it = L.extend({
    &quot;{n} people&quot; : [&quot;{n} utente&quot;, &quot;{n} utenti&quot;],
    &quot;regularly use 2GIS&quot; : &quot;utilizzano regolarmente 2GIS&quot;
}, DG.Dictionary.it);

содержимое файла lang/ru.js

 DG.LocaleExample.Dictionary.ru = L.extend({
    &quot;{n} people&quot; : [&quot;{n} пользователь&quot;, &quot;{n} пользователя&quot;, &quot;{n} пользователей&quot;],
    &quot;regularly use 2GIS&quot; : &quot;регулярно используют 2GIS&quot;
}, DG.Dictionary.ru);</code></pre>
