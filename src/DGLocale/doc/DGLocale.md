Плагин локализации карты 2GIS
====================================

В картографическом API 2GIS имеется возможность отображения элементов пользовательских интерфейсов на нескольких языках. Перевод самих тайлов при этом не предусмотрен, так как подписи на тайлах всегда соответствуют языку отображаемой страны.

Данный плагин является утилитарным и предоставляет функционал для осуществления перевода других плагинов.

После подключения данного плагина у объекта L.Map появляется 2 новых метода: setLang и getLang. Также появляется объект L.DG.Locale, который можно примешать (to mixin) в какой-либо сторонний плагин, после чего в нем появится метод t, с помощью которого можно осуществить перевод. Объекты плагинов, к которым примешивается объект L.DG.Locale должны содержать внутри себя свойство _map и статическое свойство Dictionary. Базовым для всех словарей является объект L.DG.Dictionary, в котором хранятся правила перевода слов во множественное число (plural rules). На данный момент поддерживаются правила для русского и итальянского языков. При создании плагина, использующего свои словари, необходимо их разместить в папке lang. К примеру, если вы будете использовать итальянский и русский языки, тогда необходимо создать файлы lang/it.js и lang/ru.js. Как именно создавать словари будет указано дальше в примерах.

Также есть возможность указать язык карты по умолчанию, передав его при подключении API с помощью параметра lang:

    <script src="http://maps.api.2gis.ru/2.0/loader.js?pkg=full&mode=debug&lang=it"></script>

#API

## Объект L.DG.Locale
### Методы
<table>
    <tr>
        <th>Метод</th>
        <th>Параметры</th>
        <th>Возвращаемый тип</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td>t</td>
        <td>
            <table>
                <tr>
                    <th>Тип</th>
                    <th>Описание</th>
                </tr>
                <tr>
                    <td>String</td>
                    <td>Строка, требующая перевода.</td>
                </tr>
                <tr>
                    <td>Number</td>
                    <td>Число, после которого необходимо осуществить склонение.</td>
                </tr>
            </table>
        </td>
        <td>String</td>
        <td>Осуществляет перевод строки.</td>
    </tr>
</table>

## Класс L.Map
### Методы
<table>
    <tr>
        <th>Метод</th>
        <th>Параметры</th>
        <th>Возвращаемый тип</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td>setLang</td>
        <td>
            <table>
                <tr>
                    <th>Тип</th>
                    <th>Описание</th>
                </tr>
                <tr>
                    <td>String</td>
                    <td>Код языка, например: it, ru.</td>
                </tr>
            </table>
        </td>
        <td>Нет</td>
        <td>Устанавливает текущий язык карты.</td>
    </tr>
    <tr>
        <td>getLang</td>
        <td>Нет</td>
        <td>String</td>
        <td>Возвращает текущий язык карты.</td>
    </tr>
</table>


## События
<table>
    <tr>
        <th>Событие</th>
        <th>Объект события</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td>dgLangChange</td>
        <td>LangEvent</td>
        <td>Возникает при изменении текущего языка карты.</td>
    </tr>
</table>

## Объекты событий
### LangEvent
#### Свойства
<table>
    <tr>
        <th>Свойство</th>
        <th>Тип</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td>lang</td>
        <td>String</td>
        <td>Текущий язык карты.</td>
    </tr>
</table>


# Примеры
Подмешивание (mixin) функционала локализации в пользовательский плагин:

    L.DG.LocaleExample = L.Control.extend({
        includes: L.DG.Locale,
        statics: {
                Dictionary: {}
            }
        ...
    }

Подписка на событие dgLangChange:

    map.on('dgLangChange', this._updateText, this);

Перевод строки на текущий язык карты:

    container.innerHTML = this.t("{n} people", 16700000) + ' ' + this.t("regularly use 2GIS");

Получение текущего языка карты:

    map.getLang();

Установка текущего языка карты:

    map.setLang('ru');

Создание своих словарей на итальянском и русском языках:

    содержимое файла lang/it.js

    L.DG.LocaleExample.Dictionary.it = L.extend({
        "{n} people" : ["{n} utente", "{n} utenti"],
        "regularly use 2GIS" : "utilizzano regolarmente 2GIS"
    }, L.DG.Dictionary.it);

    содержимое файла lang/ru.js

     L.DG.LocaleExample.Dictionary.ru = L.extend({
        "{n} people" : ["{n} пользователь", "{n} пользователя", "{n} пользователей"],
        "regularly use 2GIS" : "регулярно используют 2GIS"
    }, L.DG.Dictionary.ru);
