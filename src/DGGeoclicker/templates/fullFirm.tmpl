<div id="dg-map-firm-full-<%=firm.id%>" class="dg-map-firm-full" style="display:block">
    <!--Name and adress-->
    <ul class="dg-map-firm-box">
        <li class="dg-map-firm-row dg-map-firm-address"><%=firm.geo.address%>
            <% if(firm.geo.comment) { %>
            <span class="note"> &mdash; <%=firm.geo.comment%></span>
            <% } %>
        </li>
    </ul>
    <!--Subcats-->
    <ul class="dg-map-firm-box dg-map-firm-box-rubric dg-map-firm-subcats">
        <% for (var r = 0, rubrics = firm.rubrics.primary.length; r < rubrics; r++) { %>
            <li><%=firm.rubrics.primary[r].name%><%if (r !== rubrics-1) print(",");%></a></li>
        <% } %>
    </ul>
    <!--Contacts-->
    <ul class="dg-map-firm-box">
        <% for (var c = 0, contacts = firm.contact_groups.length; c < contacts; c++) { %>
        <li class="dg-map-firm-row <%if (c > 0) {print("additional-addresses");} else {print("dg-map-firm-contacts");} %>">
        <% if (firm.contact_groups[c].name){ %>
            <div class="dg-map-contact-group"><%=firm.contact_groups[c].name%></div>
        <% } %>
        <ul class="dg-map-contacts-list">
            <% for (var cont in firm.contact_groups[c].contacts) { %>
            <li class="dg-map-contacts-row dg-map-row-with-icon dg-map-row-<%=firm.contact_groups[c].contacts[cont].type %>">
                <span name="dg-map-row-<%=firm.contact_groups[c].contacts[cont].type%>-<%=firm.id%>"
                <% if (firm.contact_groups[c].contacts[cont].register_bc_url && firm.contact_groups[c].contacts[cont].type === "email") {%>
                register_bc_url=<%=firm.contact_groups[c].contacts[cont].register_bc_url %>
                <% } %>
                >
                    <% if (firm.contact_groups[c].contacts[cont].type === "website") { %>
                        <a href="<%=firm.contact_groups[c].contacts[cont].value%>"><%=firm.contact_groups[c].contacts[cont].alias%></a>
                    <% } else if (firm.contact_groups[c].contacts[cont].type === "email") { %>
                        <a href="mailto:<%=firm.contact_groups[c].contacts[cont].value%>"><%=firm.contact_groups[c].contacts[cont].value%></a>
                        <% } else { %>
                        <%=firm.contact_groups[c].contacts[cont].value%>
                    <% } %>
                </span>
            </li>
            <% } %>
        </ul>
        </li>
        <% } %>
    </ul>
   
    
    <!-- Flamp -->
    <% if (firm.allow_reviewing && firm.show_flamp_link) { %>
    <ul class="dg-map-firm-box">
    <li class="dg-map-firm-row dg-map-flamp-row">
    <a target="_blank" class="dg-map-firm-link-with-icon" href="<%=dataHelper.getFlampUrl(firm)%>">
        <span class="link-icon dg-map-icon dg-map-icon-flamp"></span>
        <% if (firm.info && firm.info.reviewscount) { %>
        <span class="dg-map-firm-link-text"><%=dict.t("ru", "reviewsOnFlamp")%></span>
        <% } else { %>
        <span class="dg-map-firm-link-text"><%=dict.t("ru", "writeReviewOnFlamp")%></span>
        <% } %>
    </a>
    <% if (firm.reviews && firm.reviews.count) { %>
    <sup><%=firm.reviews.count%></sup>
    <% } %>
    </li>
    </ul>
    <% } %>
    
    
    <!-- Company payment methods -->
    <%if (firm.attributes && firm.attributes.general && firm.attributes.general.items && firm.attributes.general.items.length) { %>
    <ul class="dg-map-firm-box dg-map-firm-payments">
        <li class="dg-map-firm-row">
            <%for (var t = 0, attrs = firm.attributes.general.items.length; t < attrs; t++) { %>
                <% if (firm.attributes.general.items[t].name == 'payment_type') {
                        var payMethods = firm.attributes.general.items[t].value;
                        for (var u = 0, methods = payMethods.length; u < methods; u++) { %>
                            <span><%=dict.t('ru', payMethods[u])%></span>
                        <%}
                    } 
                %>
            <%}%>
        </li>
    </ul>
    <% } %>
    
</div>
