<!DOCTYPE html>
<html>
	<head>
	    <meta charset='utf-8' />
	    <title>Маркер с пользовательской иконкой</title>
	    <script src="http://maps.api.2gis.ru/2.0/loader.js?pkg=full"
	    data-id="dgLoader"></script>
	</head>
	<body>
		<input id="move" type="button" value="move marker" />
		<div id="map6" style="width: 100%; height: 400px; border: 1px solid #ccc;"></div>
		<script>
		    var map;
			DG.then(function() {
		     	map = DG.map('map6', {
		            center: [54.98, 82.89],
		            zoom: 13
		    	});
			var data = { type: 'LineString', coordinates: [] },    
				start = [],
			    center = [82.89, 54.98],
			    steps = 300,
			    radius = 0.009;
			for (var i = 0; i <= steps; i++) {
			    start[0] = (center[0] + radius * Math.cos(2 * Math.PI * i / steps));
			    start[1] = (center[1] + radius * Math.sin(2 * Math.PI * i / steps));
			    data.coordinates.push(start.slice());
			}

			var geojsonLayer = DG.geoJson(data).addTo(map)
			    marker = DG.marker([54.98, 82.89]),
			    j = 0;
				document.getElementById("move").onclick = move;
				function move() {
				    marker.setLatLng([data.coordinates[j][1], data.coordinates[j][0]]).addTo(map);
				    if (++j < data.coordinates.length) setTimeout(move, 100);
				}
			});
		</script>
	</body>
</html>