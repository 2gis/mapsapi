<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <title>DGEntrance demo</title>
  <script src="http://maps.api.2gis.ru/2.0/loader.js?pkg=full&mode=debug"></script>

</head>
<body>

  <div id="map" style="width: 100%; height: 600px; border: 1px solid #ccc;"></div>
  <input type="button" value="Найти вход (карточка)" id="cardSearchBtn" />

  <script type="text/javascript">

    L.onLoad(function () {

        map = new L.Map('map', {
            //center: new L.LatLng(69.349552990994837, 87.75222519148015),
            center: [54.982, 82.921],
            zoom: 16
        });

        balloonHTML = '<p>Компания «ДубльГИС»</p>Тел.: (383) 363-05-55<br />Адрес: г. Новосибирск, Карла Маркса площадь, 7<br />\n\
                (МФК «Сан Сити»), 13 этаж<br /><br />\n\
                <input type="button" value="Найти вход" id="popupSearchBtn" />';
        //L.marker([69.3497, 87.75222519148015]).addTo(map).bindPopup(balloonHTML).openPopup();
        L.marker([54.982, 82.921]).addTo(map).bindPopup(balloonHTML).openPopup();

        document.getElementById('popupSearchBtn').onclick = onEntranceBtnClick;
        document.getElementById('cardSearchBtn').onclick = onEntranceBtnClick;
        map.on('popupopen', function() {
            document.getElementById('popupSearchBtn').onclick = onEntranceBtnClick;
            document.getElementById('cardSearchBtn').onclick = onEntranceBtnClick;
        });

        var entrance = new L.DG.Entrance({
            "is_primary":false,
            "name":"ЗАГС",
            "points":["POINT(82.921, 54.982)"],
            "vectors":["LINESTRING(82.946 54.982, 82.941 54.977, 82.921 54.982)"]
        });
        function onEntranceBtnClick () {
            entrance.addTo(map).show();
        }
    });

    </script>

</body>
</html>
